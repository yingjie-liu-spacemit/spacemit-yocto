# K1 Board Machine Configuration

# Use meta-riscv common includes for TUNE and arch settings
require conf/machine/include/riscv-common.inc

# Include graphics provider preferences
require conf/machine/include/k1-graphics.inc

# Kernel configuration
KERNEL_CLASSES = "kernel"
KERNEL_IMAGETYPE = "Image"
PREFERRED_PROVIDER_virtual/kernel = "linux-k1-dev"
PREFERRED_VERSION_linux-k1-dev = "6.6"

# U-Boot configuration
PREFERRED_PROVIDER_virtual/bootloader = "u-boot-k1"
PREFERRED_PROVIDER_u-boot = "u-boot-k1"
PREFERRED_VERSION_u-boot-k1 = "2022.10"
UBOOT_MACHINE = "k1_defconfig"

# OpenSBI configuration
PREFERRED_PROVIDER_opensbi = "opensbi-k1"
PREFERRED_VERSION_opensbi-k1 = "1.3"

# Image configuration
IMAGE_FSTYPES = "ext4 wic"
WKS_FILE = "k1.wks"

# Machine features
MACHINE_FEATURES:append = " usbhost usbgadget"

# Device tree files
KERNEL_DEVICETREE = " \
    spacemit/k1-x_baton-camera.dtb \
    spacemit/k1-x_deb1.dtb \
    spacemit/k1-x_deb2.dtb \
    spacemit/k1-x_evb.dtb \
    spacemit/k1-x_FusionOne.dtb \
    spacemit/k1-x_lpi3a.dtb \
    spacemit/k1-x_LX-V10.dtb \
    spacemit/k1-x_milkv-jupiter.dtb \
    spacemit/k1-x_MINI-PC.dtb \
    spacemit/k1-x_MUSE-Book.dtb \
    spacemit/k1-x_MUSE-Card.dtb \
    spacemit/k1-x_MUSE-N1.dtb \
    spacemit/k1-x_MUSE-Paper2.dtb \
    spacemit/k1-x_MUSE-Paper-mini-4g.dtb \
    spacemit/k1-x_MUSE-Pi.dtb \
    spacemit/k1-x_MUSE-Pi-Pro.dtb \
    spacemit/k1-x_som.dtb \
    spacemit/k1-x_uav.dtb \
    spacemit/k1-x_ZT001H.dtb \
    spacemit/m1-x_milkv-jupiter.dtb \
"